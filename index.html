<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button onclick="ahora()">MOSTRAR DATA</button>

  <!-- FORMULARIO PARA CRIAR JOGADOR NOVO -->
  <form id="playerForm">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required><br><br>

    <label for="age">Age:</label>
    <input type="number" id="age" name="age" required><br><br>

    <label for="number">Number:</label>
    <input type="number" id="number" name="number"><br><br>

    <label for="position">Position:</label>
    <input type="text" id="position" name="position" required><br><br>

    <label for="photo">Photo URL:</label>
    <input type="text" id="photo" name="photo" required><br><br>

    <button type="button" id="submitBtn">Submit</button>
  </form>
  <div id="playerList"></div>


  <script>

// Variables Globales
    let jsonData;
    let playerData = {
      name: playerNome,
      age: playerAge,
      number: playerNumber,
      position: playerPosition,
      photo: playerPhoto
    };
    let playerId = 123;
    let dadosNovos = {
    age: 25,
    number: 10,
    position: 'Forward',
  };

  // Funçao que pede os dados para a API
    function ahora() {
      fetch('https://v3.football.api-sports.io/players/squads?team=127', {
        method: 'GET',
        headers: {
          'x-rapidapi-host': 'v3.football.api-sports.io',
          'x-rapidapi-key': '83303917d80ac4e0dad6d309eabe233e'
        }
      })
        .then(response => response.json())
        .then(data => {
          jsonData = data;
          console.log(jsonData);
          mostrarSquad();
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }
     
  // FUNÇAO QUE CRIA OS DIV E MOSTRA OS DADOS
    function mostrarSquad() {
      const playerListDiv = document.getElementById('playerList');

      jsonData.response[0].players.forEach(player => {
        const playerDiv = document.createElement('div');
        playerDiv.classList.add('player');

        const playerName = document.createElement('p');
        playerName.textContent = `Name: ${player.name}`;

        const playerAge = document.createElement('p');
        playerAge.textContent = `Age: ${player.age}`;

        const playerNumber = document.createElement('p');
        playerNumber.textContent = `Number: ${player.number || 'N/A'}`;

        const playerPosition = document.createElement('p');
        playerPosition.textContent = `Position: ${player.position}`;

        const playerPhoto = document.createElement('img');
        playerPhoto.src = player.photo;
        playerPhoto.alt = player.name;

        playerDiv.appendChild(playerName);
        playerDiv.appendChild(playerAge);
        playerDiv.appendChild(playerNumber);
        playerDiv.appendChild(playerPosition);
        playerDiv.appendChild(playerPhoto);

        playerListDiv.appendChild(playerDiv);
      });
    }


  // FUNÇAO que faz o POST para criar un novo jogador 
    function sendPlayer() {
      fetch('https://v3.football.api-sports.io/players', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'x-rapidapi-host': 'v3.football.api-sports.io',
          'x-rapidapi-key': '83303917d80ac4e0dad6d309eabe233e'
        },
        body: JSON.stringify(playerData)
      })
        .then(response => response.json())
        .then(data => {
          console.log('New player created:', data.id);
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }


  // FUNÇAO que modifica com o metodo PUT a um jogador
    function updatePlayer(playerId, dadosNovos) {
  fetch(`https://v3.football.api-sports.io/players/?id=${playerId}`, {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json',
      'x-rapidapi-host': 'v3.football.api-sports.io',
      'x-rapidapi-key': '83303917d80ac4e0dad6d309eabe233e'
    },
    body: JSON.stringify(updatedData)
  })
  .then(response => response.json())
  .then(data => {
    console.log('Player updated:', data);
  })
  .catch(error => {
    console.error('Error:', error);
  });
}


  // Funcion que apaga o jogador usando DELETE
    function deletePlayer(playerId) {
  fetch(`https://v3.football.api-sports.io/players/?id=${playerId}`, {
    method: 'DELETE',
    headers: {
      'x-rapidapi-host': 'v3.football.api-sports.io',
      'x-rapidapi-key': '83303917d80ac4e0dad6d309eabe233e'
    }
  })
  .then(response => {
    if (response.ok) {
      console.log(`Player with ID ${playerId} deleted successfully.`);
    } else {
      console.error('Failed to delete player.');
    }
  })
  .catch(error => {
    console.error('Error:', error);
  });
}

   // Eventos de escuta que salva os dados de jogador novo
    document.getElementById('submitBtn').addEventListener('click', function () {
      let playerName = document.getElementById('name').value;
      let playerAge = document.getElementById('age').value;
      let playerNumber = document.getElementById('number').value;
      let playerPosition = document.getElementById('position').value;
      let playerPhoto = document.getElementById('photo').value;
      console.log(playerData);
    });

  </script>
</body>

</html>